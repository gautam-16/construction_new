const express=require('express')
const app= express();
// const multer = require('multer')
const router= express.Router();
require('dotenv').config({path:'backend/config/.env'})
const cookieparser=require('cookie-parser')
const fileupoad = require('express-fileupload')
const bodyParser = require('body-parser')
const cors=require('cors')


app.use(cors({
  origin:'*'
}));
app.use(bodyParser.urlencoded({ extended: false }))
app.use(bodyParser.json())
const sequelize=require('./server')

sequelize.authenticate().then(() => {
    console.log("Database connected!");}).catch((err) => {
        console.log(err)});

app.listen(process.env.PORT,'localhost',()=>{console.log(`Server running on port ${process.env.PORT}`)})
//'192.168.29.178'
app.use(fileupoad({useTempFiles:true}))

const table=require('./routes/table.routes')
const user=require('./routes/user.routes')
const project=require('./routes/project.routes')
const phase=require('./routes/phase.routes')
const task=require('./routes/task.routes')
const role=require('./routes/role.routes')
app.use('/table',table)
app.use('/user',user)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
app.use('/user',user)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
app.use('/project',project)
app.use('/phase',phase)
app.use('/task',task)
app.use('/role',role)



module.exports=app;




